services:
  central_comm:
    user: root
    build:
      context: ./central_comm
      dockerfile: Dockerfile
    image: bodyjetson/central_comm:latest
    container_name: central_comm
    network_mode: host
    restart: unless-stopped
    environment:
      - ROS_DOMAIN_ID=0
      - ROS_LOG_DIR=/home/ros/.ros/log
    volumes:
      # Mount shared volume:
      - ./central_comm/ros2_ws/src:/home/ros/ros2_ws/src:rw
      - ./central_comm/ros2_ws/build:/home/ros/ros2_ws/build:rw
      - ./central_comm/ros2_ws/install:/home/ros/ros2_ws/install:rw
      - ./central_comm/ros2_ws/log:/home/ros/.ros/log:rw
    devices:
      #- /dev/ttyACM0:/dev/ttyACM0        # Pico 
      - dev/serial/by-id/usb-1a86_USB_Serial-if00-port0 # right BMS
      - /dev/i2c-7:/dev/i2c-7            # IÂ²C
